# Reco Notification

## ユーザーストーリー (User Story)

Geekとして、効率的に新しい音楽と出会いたいので、自分の好みに合いそうな他の人のおすすめがあれば通知で教えてほしい。

## ゴール (Goals)

- ユーザーの好みに合致する可能性が高い新しいおすすめ投稿があった場合に、プッシュ通知やアプリ内通知でユーザーに知らせる。
- ユーザーが能動的にフィードをチェックしなくても、関連性の高い音楽発見の機会を提供する。
- タイムリーな情報提供により、エンゲージメントを高める。

## シナリオ (Scenarios)

**シナリオ1: フォローしているユーザーの新しいおすすめ通知**

**前提 (Given):**

- ユーザーAはQrateMateにログインしている。
- ユーザーAはユーザーBをフォローしている。
- ユーザーBが新しいおすすめ投稿をする。
- ユーザーAは通知設定を有効にしている。

**操作 (When):**

1. QrateMateシステムがユーザーBの新しい投稿を検知する。
2. システムがユーザーBのフォロワー（ユーザーAを含む）を特定する。
3. システムがユーザーAに対して通知を送信する準備をする。

**結果 (Then):**

- ユーザーAに「フォロー中のUserBさんが新しいおすすめを投稿しました: [曲名/アルバム名]」のような通知が届く。
- 通知をタップすると、ユーザーBの該当のおすすめ投稿詳細画面に遷移する。

**シナリオ2: 好みのジャンル/アーティストのおすすめ通知 (発展形)**

**前提 (Given):**

- ユーザーAはQrateMateにログインしており、好みのジャンルやアーティストを設定している（またはシステムが聴取履歴から推定）。
- 他のユーザーが、ユーザーAの好みに合致するジャンルやアーティストのアイテムをおすすめ投稿する。
- ユーザーAは通知設定を有効にしている。

**操作 (When):**

1. QrateMateシステムが新しいおすすめ投稿を検知する。
2. システムが投稿内容とユーザーAの嗜好プロファイルを照合する。
3. 一致度が高いと判断された場合、システムがユーザーAに対して通知を送信する準備をする。

**結果 (Then):**

- ユーザーAに「あなたの好きな[ジャンル名]の新しいおすすめがあります: [曲名]」のような通知が届く。
- 通知をタップすると、該当のおすすめ投稿詳細画面に遷移する。

## 受け入れ条件 (Acceptance Criteria)

- ユーザーは、フォローしているユーザーの新しいおすすめ投稿に関する通知を受け取ることができる。
- （発展）ユーザーは、自分の嗜好（好きなジャンル、アーティストなど）に合致する新しいおすすめ投稿に関する通知を受け取ることができる。
- 通知はプッシュ通知および/またはアプリ内通知として提供される。
- ユーザーは通知の種類ごとにオン/オフを設定できる。
- 通知から該当のおすすめ投稿へ直接アクセスできる。

## 技術的なメモ (任意)

- プッシュ通知基盤（例: Firebase Cloud Messaging）。
- ユーザーのフォロー関係、嗜好プロファイル（明示的な設定、聴取履歴からの暗黙的な推定）を管理する。
- 新規投稿時に、関連ユーザーへ通知をディスパッチするロジック（サーバーサイド）。
- 通知のパーソナライズロジック（発展形の場合）。

## 対象外 (任意)

- 全ての新規投稿を全ユーザーに通知する機能（スパムになるため）。
- 非常に細かい通知設定（初期は主要な通知タイプに絞る）。

# Contextual Fan Recos

## ユーザーストーリー (User Story)

Diggerとして、音楽を聴いている時に、その曲に関連した他の音楽ファンのおすすめを知りたい。

## ゴール (Goals)

- ユーザーが現在聴いている曲や閲覧しているアイテム（曲、アルバム、アーティスト）に対して、他のQrateMateユーザーが投稿した関連性の高いおすすめを表示する。
- 「この曲を好きな他の人はこんなものもおすすめしている」といった形の、コミュニティベースの音楽発見を提供する。
- 既存の「おすすめ投稿」機能を、よりコンテキストに合わせた形でユーザーに提示する。

## シナリオ (Scenarios)

**シナリオ1: 再生中の曲画面で、他のファンのおすすめを表示**

**前提 (Given):**

- ユーザーAはQrateMateにログインし、曲Xを再生中（または曲Xの詳細を閲覧中）。
- 他のユーザー（ユーザーB、ユーザーCなど）が、曲Xや、曲Xのアーティスト、曲Xが含まれるアルバム、または曲Xと類似の曲Yなどをおすすめとして投稿している。

**操作 (When):**

1. ユーザーAが曲Xの画面で「他のファンのおすすめ」セクションを見る。
2. QrateMateが、曲Xに関連する他ユーザーのおすすめ投稿をリストアップして表示する。
   （例: UserBによる「この曲Xと同じアーティストのアルバムZは最高！」、UserCによる「曲Xが好きなら、この曲Yもきっと気に入るはず」）

**結果 (Then):**

- ユーザーAに、曲Xの文脈に関連した他のユーザーのおすすめ投稿が表示される。
- ユーザーAはそれらのおすすめを閲覧し、気になったアイテムを「あとで聴く」に保存したり、元のおすすめ投稿に「いいね」やコメントをしたりできる。

## 受け入れ条件 (Acceptance Criteria)

- 現在のコンテキスト（再生中の曲、閲覧中のアルバム/アーティスト）に基づいて、関連する他のQrateMateユーザーのおすすめ投稿を表示する機能がある。
- 関連性の判断基準には、アイテム自体の一致、アーティストの一致、ジャンルの一致、ユーザー間の嗜好の類似性などを考慮できる。
- 表示されたおすすめ投稿から、推薦アイテムの「あとで聴く」への保存や、元投稿へのアクセスが容易に行える。
- 関連するおすすめがない場合は、その旨が適切に表示される。

## 技術的なメモ (任意)

- 現在のコンテキスト（曲ID、アルバムID、アーティストID）をキーとして、おすすめ投稿データベースを検索するロジック。
- 関連性スコアリングのアルゴリズム（例: 直接的な関連度、間接的な関連度、投稿の鮮度、人気度などを考慮）。
- 既存の「おすすめ投稿」データと連携。
- 表示UIは、現在のアイテム詳細画面内に専用セクションを設けるなど。

## 対象外 (任意)

- リアルタイムでの超高度なコンテキストマッチング（初期はバッチ処理や事前計算された関連性も許容）。
- ユーザーがコンテキストのおすすめ表示ロジックを細かく制御する機能。
